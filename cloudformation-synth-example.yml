Resources:
  DatabaseSubnets56F17B9A:
    Type: AWS::RDS::DBSubnetGroup
    Properties:
      DBSubnetGroupDescription: Subnets for Database database
      SubnetIds:
        - subnet-0640f78b43f6a9b0d
        - subnet-0ce091d6defd7a3b2
        - subnet-0b0e862d47bd96fd8
    Metadata:
      aws:cdk:path: DatabaseStack/Database/Subnets/Default
  DatabaseSecurityGroup5C91FDCB:
    Type: AWS::EC2::SecurityGroup
    Properties:
      GroupDescription: RDS security group
      SecurityGroupEgress:
        - CidrIp: 0.0.0.0/0
          Description: Allow all outbound traffic by default
          IpProtocol: "-1"
      VpcId: vpc-064797d5f7844ef31
    Metadata:
      aws:cdk:path: DatabaseStack/Database/SecurityGroup/Resource
  DatabaseStackDatabaseSecret21058D343fdaad7efa858a3daf9490cf0a702aeb:
    Type: AWS::SecretsManager::Secret
    Properties:
      Description:
        Fn::Join:
          - ""
          - - "Generated by the CDK for stack: "
            - Ref: AWS::StackName
      GenerateSecretString:
        ExcludeCharacters: " %+~`#$&*()|[]{}:;<>?!'/@\"\\"
        GenerateStringKey: password
        PasswordLength: 30
        SecretStringTemplate: '{"username":"clusteradmin"}'
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: DatabaseStack/Database/Secret/Resource
  DatabaseSecretAttachmentE5D1B020:
    Type: AWS::SecretsManager::SecretTargetAttachment
    Properties:
      SecretId:
        Ref: DatabaseStackDatabaseSecret21058D343fdaad7efa858a3daf9490cf0a702aeb
      TargetId:
        Ref: DatabaseB269D8BB
      TargetType: AWS::RDS::DBCluster
    Metadata:
      aws:cdk:path: DatabaseStack/Database/Secret/Attachment/Resource
  DatabaseB269D8BB:
    Type: AWS::RDS::DBCluster
    Properties:
      Engine: aurora-postgresql
      CopyTagsToSnapshot: true
      DBClusterParameterGroupName: default.aurora-postgresql13
      DBSubnetGroupName:
        Ref: DatabaseSubnets56F17B9A
      EngineVersion: "13.4"
      MasterUsername: clusteradmin
      MasterUserPassword:
        Fn::Join:
          - ""
          - - "{{resolve:secretsmanager:"
            - Ref: DatabaseStackDatabaseSecret21058D343fdaad7efa858a3daf9490cf0a702aeb
            - :SecretString:password::}}
      Port: 5432
      VpcSecurityGroupIds:
        - Fn::GetAtt:
            - DatabaseSecurityGroup5C91FDCB
            - GroupId
    UpdateReplacePolicy: Snapshot
    DeletionPolicy: Snapshot
    Metadata:
      aws:cdk:path: DatabaseStack/Database/Resource
  DatabaseInstance1844F58FD:
    Type: AWS::RDS::DBInstance
    Properties:
      DBInstanceClass: db.r6g.large
      DBClusterIdentifier:
        Ref: DatabaseB269D8BB
      DBSubnetGroupName:
        Ref: DatabaseSubnets56F17B9A
      Engine: aurora-postgresql
      EngineVersion: "13.4"
      PubliclyAccessible: true
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: DatabaseStack/Database/Instance1
  DatabaseInstance2AA380DEE:
    Type: AWS::RDS::DBInstance
    Properties:
      DBInstanceClass: db.r6g.large
      DBClusterIdentifier:
        Ref: DatabaseB269D8BB
      DBSubnetGroupName:
        Ref: DatabaseSubnets56F17B9A
      Engine: aurora-postgresql
      EngineVersion: "13.4"
      PubliclyAccessible: true
    UpdateReplacePolicy: Delete
    DeletionPolicy: Delete
    Metadata:
      aws:cdk:path: DatabaseStack/Database/Instance2
  CDKMetadata:
    Type: AWS::CDK::Metadata
    Properties:
      Analytics: v2:deflate64:H4sIAAAAAAAA/11QzW7CMAx+Fu4hNIPtzFakaVe6FzCp1xVoMtkO0xT13Ze0alXIxcr35x+jo9nudLHawy+vbX3ZWE+oYyVgL6r0joWCFVV+uSOyD2SxV+a5WDriYJloleFINet4AIETMJbXwIKkqnByKO/kw08OPLwtgUlcoSWUkZ+Mw+cjzQIu90f7lCZEG6iVvznuDugVDzncgYMGScdRkaPH8gnUoLxKWvS7QydqFjwyfXrK+Rr1mTc386JNPtiZ23ZNwUnbpeXH+g9ne+kPTgEAAA==
    Metadata:
      aws:cdk:path: DatabaseStack/CDKMetadata/Default
